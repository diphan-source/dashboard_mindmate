{% extends 'base.html' %} 

{% block title %} Users {% endblock %} 

{% block nav %}
{% include 'nav.html' %}
{% endblock %}

{% block sidebar %}
{% include 'sidebar.html' %}
{% endblock %}

{% block body %}
<div class="container-fluid">
    <div class="page-title">
      <div class="row">
        <div class="col-12 col-sm-6">
          <h3>Users</h3>
        </div>
        <div class="col-12 col-sm-6">
          <ol class="breadcrumb">
            <li class="breadcrumb-item">
              <a href="/users/">
                <i data-feather="home"></i>
              </a>
            </li>
            <li class="breadcrumb-item">Dashboard</li>
            <li class="breadcrumb-item active">Users</li>
          </ol>
        </div>
      </div>
    </div>
  </div>
  <div class="container-fluid">
      <div class="row project-cards">
        <div class="col-md-12 project-list">
          <div class="card">
            <div class="row">
              <div class="col-md-6 p-0">
  
              </div>
              <div class="col-md-6 p-0">
                <div class="form-group mb-0 me-0"></div>
                {% if request.user.is_superuser %}
                <a class="btn btn-primary"  href="add/">
                  <i data-feather="plus-square"></i>
                  Create New 
                </a>
                {% else %}
                <a class="btn btn-primary disabled"  href="add/">
                  <i data-feather="plus-square"></i>
                  Create New
                </a>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="card">
              <div class="card-body">
                  <div class="row">
                      <div class="table-responsive">
                          <table class="table table-hover" id="user">
                              <thead>
                                  <tr>
                                      <th scope="col">ID</th>
                                      <th scope="col">UserName</th>
                                      <th scope="col">Email</th>
                                      <th scope="col">First Name</th>
                                      <th scope="col">Last Name</th>
                                      <th scope="col">Action</th>
                                  </tr>
                              </thead> 
                              <tbody>
                                  {% if users %}
                                     {% for user in users %}
                                      <tr>
                                          <th scope="row">{{ user.id }}</th>
                                          <td>{{ user.username }}</td>
                                          <td>{{ user.email}}</td>
                                          <td>{{ user.first_name }}</td>
                                          <td>{{ user.last_name }}</td>
                                          <td>
                                              <!-- disable edit on other users only allow for current user and as well as user if super admin -->
                                              {% if user.id == request.user.id %}
                                              <a href="edit/{{ user.id }}" class="btn btn-primary btn-xs">
                                                  <i data-feather="edit"></i>
                                              </a>
                                              {% elif request.user.is_superuser and user.id != request.user.id %}
                                              <a href="edit/{{ user.id }}" class="btn btn-primary btn-xs">
                                                <i data-feather="edit"></i>
                                              </a>
                                              <a href="delete/{{ user.id }}" class="btn btn-danger btn-xs">
                                                  <i data-feather="trash"></i>
                                              </a>
                                              {% endif %}

                                          </td>
                                      </tr>
                                      {% endfor %}
                                  {% else %}
                                      <tr>
                                          <td colspan="7">No Users Found</td>
                                      </tr>
                                  {% endif %}
                              </tbody>       
                          </table>
                      </div>
                  </div>
              </div>
          </div>
        </div>
      </div>
    </div>
{% endblock %}